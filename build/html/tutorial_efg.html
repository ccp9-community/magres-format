<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Processing electric field gradients &mdash; Magres format 0.9 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Magres format 0.9 documentation" href="index.html" />
    <link rel="up" title="Tutorials" href="tutorials.html" />
    <link rel="next" title="Processing indirect spin-spin couplings" href="tutorial_isc.html" />
    <link rel="prev" title="Processing magnetic shieldings" href="tutorial_ms.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial_isc.html" title="Processing indirect spin-spin couplings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial_ms.html" title="Processing magnetic shieldings"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Magres format 0.9 documentation</a> &raquo;</li>
          <li><a href="tutorials.html" accesskey="U">Tutorials</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="processing-electric-field-gradients">
<h1>Processing electric field gradients<a class="headerlink" href="#processing-electric-field-gradients" title="Permalink to this headline">¶</a></h1>
<div class="section" id="gehlenite-a-disordered-material">
<h2>Gehlenite: A disordered material<a class="headerlink" href="#gehlenite-a-disordered-material" title="Permalink to this headline">¶</a></h2>
<p>Gehlenite is a disordered aluminosilicate consisting of two types of aluminium site and one type of silicon site. We want to look at aluminium EFGs to quantify the amount of disorder in the material, in particular the degree of violation of the &#8220;Loewenstein&#8221; rule (avoidance of Al-O-Al linkages) and its structural effects. This section is based on analysis performed in <a class="reference external" href="http://pubs.acs.org/doi/abs/10.1021/cm3016935">Elucidation of the Al/Si Ordering in Gehlenite Ca2Al2SiO7 by Combined 29Si and 27Al NMR Spectroscopy/Quantum Chemical Calculations</a>.</p>
<p>Two sets of EFG calculations have been performed. Both have 25 relaxed structures, representing five different central aluminium sites with five random occupations of other sites. The first set, &#8220;low&#8221;, has no Al-O-Al or Si-O-Si bonds present, the other &#8220;random&#8221; has some present. We want to aggregate aluminium EFGs according to their site type (indexed by number of silicon second-neighbours) and compute statistics.</p>
<p><a class="reference external" href="http://tfgg.github.io/magres-format/workshop/tutorial_disordered/gehlenite_efgs.zip">Download the files here</a> and unzip them somewhere. <a class="reference external" href="http://tfgg.github.io/workshop/tutorial_disordered/Cq_dist.py">Download the example script</a> and put it in the same directory.</p>
<div class="code highlight-python"><pre>curl -L "http://tfgg.github.io/magres-format/workshop/tutorial_disordered/gehlenite_efgs.zip" &gt; gehlenite_efgs.zip
unzip gehlenite_efgs.zip
curl -L "http://tfgg.github.io/magres-format/workshop/tutorial_disordered/Cq_dist.py" &gt; Cq_dist.py</pre>
</div>
<p>Inspect Cq_dist.py with your favourite text editor and try running it on the two sets of structures:</p>
<div class="code highlight-python"><pre>python Cq_dist.py files/orig
python Cq_dist.py files/low</pre>
</div>
<p>Note the means and standard deviations for the sites. What does this tell you about the presence of Loewenstein rule violating sites and disorder?</p>
<p>Some key techniques used in this script:</p>
<ul class="simple">
<li>We used magres.utils.find_all to quickly locate all the .magres files in the given directory and make a MagresAtoms object for each.</li>
<li>We loop over each atoms object and loop over every aluminium atom in each by using the atoms.species(&#8216;Al&#8217;) selector.</li>
<li>In order to classify the aluminium site as T1 or T2 (see paper), we count the number of aluminium and silicon neighbours within 3.5 Angstroms (chosen for this specific system) using the atoms.species([&#8216;Al&#8217;, &#8216;Si&#8217;]).within(Al_atom, 3.5) selector.</li>
<li>We further refine this list of neighbours to just silicon atoms in order to count them for n_si using the neighbours.species(&#8216;Si&#8217;) selector.</li>
<li>We access the C_q value for the aluminium atom by access the efg.Cq property on it. This is available on all atoms with EFG data.</li>
</ul>
<div class="section" id="plotting-with-matplotlib">
<h3>Plotting with matplotlib<a class="headerlink" href="#plotting-with-matplotlib" title="Permalink to this headline">¶</a></h3>
<p>If the matplotlib Python module is installed on your computer, you could try plotting a histogram of the EFGs with the following code at the end of the script:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">Al_Cqs</span><span class="p">[</span><span class="s">&#39;T1&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">Al_Cqs</span><span class="p">[</span><span class="s">&#39;T1&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">Al_Cqs</span><span class="p">[</span><span class="s">&#39;T1&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">Al_Cqs</span><span class="p">[</span><span class="s">&#39;T1&#39;</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">Al_Cqs</span><span class="p">[</span><span class="s">&#39;T1&#39;</span><span class="p">][</span><span class="mi">4</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="calculating-distortion-parameters">
<h3>Calculating distortion parameters<a class="headerlink" href="#calculating-distortion-parameters" title="Permalink to this headline">¶</a></h3>
<p>Modify the script to calculate Ghose&#8217;s tetrahedral distortion parameter (Ghose, S.; Tsang, T. Am. Mineral. 1973, 58, 748): the mean tangent of the absolute deviation of the O-Al-O bond angles from the tetrahedral angle (109.47°). Does this correlate with the aluminium Cqs?</p>
<p>A working script which does this <a class="reference external" href="http://tfgg.github.io/magres-format/workshop/tutorial_disordered/Cq_ghose.py">is available at here</a>. Run it like</p>
<div class="code bash highlight-python"><pre>python Cq_ghose files/low &gt; ghose.dat</pre>
</div>
<p>and use gnuplot to plot a scatterplot of tetrahedral distortion vs. aluminium Cq.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Processing electric field gradients</a><ul>
<li><a class="reference internal" href="#gehlenite-a-disordered-material">Gehlenite: A disordered material</a><ul>
<li><a class="reference internal" href="#plotting-with-matplotlib">Plotting with matplotlib</a></li>
<li><a class="reference internal" href="#calculating-distortion-parameters">Calculating distortion parameters</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial_ms.html"
                        title="previous chapter">Processing magnetic shieldings</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tutorial_isc.html"
                        title="next chapter">Processing indirect spin-spin couplings</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial_efg.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial_isc.html" title="Processing indirect spin-spin couplings"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial_ms.html" title="Processing magnetic shieldings"
             >previous</a> |</li>
        <li><a href="index.html">Magres format 0.9 documentation</a> &raquo;</li>
          <li><a href="tutorials.html" >Tutorials</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Tim Green.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>